# Ch16 Route

- React Router가 v6로 업그레이드 되면서 많은 것이 바뀌었다. 공식 Docs를 보고 참고해야겠다.
- `Routes` -> `Route` x N -> `element`, `path` prop

Single Page Application: SPA
React is for... ^^^

But: With Router -> Multiple URL

outline:

```js
import Header from './Header';
import Nav from './Nav';
import Footer from './Footer';
import Home from './Home';
import NewPost from './NewPost';
import PostPage from './PostPage';
import About from './About';
import Missing from './Missing';
import { Route, Routes, useNavigate } from 'react-router-dom'
import { useState, useEffect } from 'react'
```

`npm i react-router-dom --save`

+) 이번엔 각 컴포넌트의 root 요소에 컴포넌트 이름으로 css class를 주어보자

!!: Header, Nav, Footer 등은 사이트에 유지, 메인 콘텐츠만 새로 불러올 수 있다.
=> 성능 개선!

## React Router의 버전 차이

React Router가 v6로 업그레이드 되면서 많은 부분이 바뀌었다.

[공식 Docs](https://reactrouter.com/en/main/upgrading/v5)

아... 앞으로 많이 힘들 듯...

- useHistory -> useNavigate
- Switch -> Routes

### 에러: Routes의 Children

`[NewPost] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`

오류가 있던 코드

```jsx
<Routes>
  <Route path="/">
    <Home/>
  </Route>
  <Route path="/">
    <NewPost/>
  </Route>
  <Route path="/">
    <PostPage/>
  </Route>
  <Route path="/">
    <About/>
  </Route>
  <Route path="/">
    <Missing/>
  </Route>
</Routes>
```

수정:

```jsx
<Routes>
  <Route path="/" element={<Home/>}/>
  <Route path="/" element={<NewPost/>}/>
  <Route path="/" element={<PostPage/>}/>
  <Route path="/" element={<About/>}/>
  <Route path="/" element={<Missing/>}/>
</Routes>
```


### 에러: App 표시 안함

오류가 있던 코드:

react-router-dom의 버전 업그레이드로 인한 버그

```jsx
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <Router>
      <Route path="/" Component={App}/>
    </Router>
  </React.StrictMode>
);
```

해결:

```jsx
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <Router>
      <Routes>
        <Route path="*" Component={App}/>
        {/*          ^ '*' 문자 주의, '/' 아님 */}
      </Routes>
    </Router>
  </React.StrictMode>
);
```

### wildcard 사용하기

> \<Route exact\> is gone. Instead, routes with descendant routes (defined in other components) use a trailing \* in their path to indicate they match deeply
